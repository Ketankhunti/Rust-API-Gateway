server:
  addr: "127.0.0.1:8080"


observability:
  metrics:
    enabled: true

identity:
  api_key_store_path: "./api_keys.yaml"

routes:
  - name: "public_service"
    path: "/api/public"
    destination: "https://httpbin.org/anything"
    # This route's responses will be cached for 30 seconds.
    cache:
      ttl: "10s"

  - name: "admin_service"
    path: "/api/admin"
    destination: "https://httpbin.org/anything"
    auth:
      type: "Jwt"
      roles: ["admin"] # Requires a JWT with the 'admin' role

  - name: "user_service"
    path: "/api/user"
    destination: "https://httpbin.org/anything"
    auth:
      type: "ApiKey"
      roles: ["user"] # Requires an API key with the 'user' role

  - name: "rate_service"
    path: "/api/ratelimit"
    destination: "https://httpbin.org/anything"
    auth:
      "type": "ApiKey"
      "roles": ["user"]
    rate_limit:
      requests: 10
      period: "1m"